#### 1、异步编程

（1）异步方法：用async关键字修饰，返回值一般是Task\<T> T是返回值类型

（2）没有返回值，也要加上无泛型Task返回值

（3）调用异步方法时，在方法前加上 await，这样拿到的返回值就直接是泛型指定的类型

（4）使用了await的方法，本身也必须是异步方法

（5）`IDisposable` 接口

如果一个类需要管理非内存资源（如文件、数据库连接等），应该实现 `IDisposable` 接口，并在类中实现 `Dispose` 方法。`IDisposable` 接口中只定义了一个方法：void Dispose();

实现 `Dispose` 方法的类必须在方法内释放非内存资源

`using` 关键字必须用在实现了 `IDisposable` 接口的类型上，以确保资源正确释放

也可以手动去释放资源

（6）await

c#中的异步操作和任务默认使用.NET Core 提供的线程池执行

`await` 修饰的方法不会直接导致新线程的创建。线程回到线程池，等await方法执行完毕，再利用现有的线程池中的线程来继续执行

不会阻塞当前线程，但是可能会导致前后执行的线程不同

方法执行短时优化了，不会切换线程

有些时候返回值是task，但不需要经过复杂处理也不需要等待时，可以不使用await和async，使用await只是为了把异步操作的结果值取出



#### 2、Task.delay() 

异步方法中用Task.delay() 不用Thread.sleep()会阻塞当前线程



#### 3、CancellationToken

CancellationToken用来取消操作，防止用户取消后服务器资源继续占用

自己去写的话，要考虑执行到判断超时的语句是同步的。

使用的方法有CancellationToken重载的话，可以看看取消的逻辑

有的可能封装好，可以在超时时直接取消操作



#### 4、.ConfigureAwait(false);

`.ConfigureAwait(false)` 被添加在异步方法后，异步方法执行后不会尝试恢复到调用线程的上下文环境中。这对于数据库查询等大量 I/O 操作来说，能够减少不必要的线程切换开销，提升系统的整体性能。



